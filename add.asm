.ORIG x3000

LEA R6, USP
LEA R0, START
LDW R1, R0, #0
AND R2, R2, #0
ADD R2, R2, #1
STW R2, R1, #0

LEA R2, ADDBEGIN
LDW R2, R2, #0 ; R2 = addr in memory 

AND R3, R3, #0; R3 will have the sum 

AND R4,R4, #0; R4 <- counter 
ADD R4, R4, #10
ADD R4, R4, #10

LOOP LDB R5, R2, #0
     ADD R3, R3, R5 ;3018
     ADD R2, R2, #1 ; 301a
     ADD R4, R4, #-1 ; 301c
     BRNP LOOP  ; 301e
     
LEA R2, STORESUM ;3020
LDW R2, R2, #0 ;3022
STW R3, R2, #0 ;3024

LEA R2, PROTEXC ;3026
LDW R2, R2, #0 ;3028
STW R3, R2, #0 ;302a

TRAP x25 

START .FILL x4000
ADDBEGIN .FILL xC000
STORESUM .FILL xC014
PROTEXC .FILL x0000
UNALIGNED .FILL xC017
USP .FILL xFE00 
.END